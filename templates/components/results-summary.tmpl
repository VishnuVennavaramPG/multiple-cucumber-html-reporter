<% if (suite.resultsSummary) { %>
<div class="x_title">
    <h2><% if (suite.resultsSummary.title) { %><%= suite.resultsSummary.title %><% } else { %>Custom data title<% } %></h2>
    <ul class="nav navbar-right panel_toolbox">
        <li>
            <a class="collapse-link">
                <i class="fa fa-chevron-up"></i>
            </a>
        </li>
    </ul>
    <div class="clearfix"></div>
</div>
<div class="x_content">
    <div class="dashboard-widget-content">
        <table class="quick-list">
            <thead>
                <tr>
                    <th>Platforms</th> <% /* Header for the first column */ %>
                    <% let keys = Object.keys(suite.resultsSummary); %>
                    <% let firstKey = keys[0]; %>
                    <% for (let resultKey in suite.resultsSummary[firstKey]) { %>
                        <th><%= resultKey %></th> <% /* Headers with result keys */ %>
                    <% } %>
                </tr>
            </thead>
            <tbody>
                <% for (let i = 0; i < keys.length - 1; i++) { %>
                    <% var failValueExceedsTen = false; %>
                    <% var passValueExceedsNinety = false; %>
                    <% for (let resultKey in suite.resultsSummary[firstKey]) { %>
                        <% let value = Number(suite.resultsSummary[keys[i]][resultKey]); %>
                        <% if (resultKey.includes('fail') && value > 10) { %>
                            <% failValueExceedsTen = true; %>
                        <% } %>
                        <% if (resultKey.includes('pass') && value > 90) { %>
                            <% passValueExceedsNinety = true; %>
                        <% } %>
                    <% } %>

                    <tr>
                        <% if (failValueExceedsTen) { %>
                            <% status = 'Failed'; %>
                            <% statusIcon = 'exclamation-circle failed-color'; %>
                            <td><%= keys[i] %> <i class="fa fa-<%= statusIcon %> fa-lg" data-toggle="tooltip" data-placement="top" title="<%= status %>"><span><%= statusIcon %></span></i></td>
                        <% } else { %>
                            <td><%= keys[i] %></td>
                        <% } %>

                        <% /* Rest of the columns */ %>
                        <% for (let resultKey in suite.resultsSummary[firstKey]) { %>
                            <% let value = Number(suite.resultsSummary[keys[i]][resultKey]); %>
                            <% if ((resultKey.includes('fail') && value > 10) || (resultKey.includes('pass') && value > 90)) { %>
                                <td><strong><%= value %></strong></td>
                            <% } else { %>
                                <td><%= value %></td>
                            <% } %>
                        <% } %>
                    </tr>

                <% } %>
            </tbody>
        </table>
    </div>
</div>
<% } %>
