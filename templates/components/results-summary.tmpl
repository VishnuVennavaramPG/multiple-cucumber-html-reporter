<% if (suite.resultsSummary) { %>
<div class="x_title">
    <h2><% if (suite.resultsSummary.title) { %><%= suite.resultsSummary.title %><% } else { %>Custom data title<% } %></h2>
    <ul class="nav navbar-right panel_toolbox">
        <li>
            <a class="collapse-link">
                <i class="fa fa-chevron-up"></i>
            </a>
        </li>
    </ul>
    <div class="clearfix"></div>
</div>
<div class="x_content">
    <div class="dashboard-widget-content">
        <table class="quick-list">
            <thead>
                <tr>
                    <th>Platforms</th> <% /* Header for the first column */ %>
                    <% let keys = Object.keys(suite.resultsSummary); %>
                    <% let firstKey = keys[0]; %>
                    <% for (let resultKey in suite.resultsSummary[firstKey]) { %>
                        <th><%= resultKey %></th> <% /* Headers with result keys */ %>
                    <% } %>
                </tr>
            </thead>
            <tbody>
                <% for (let i = 0; i < keys.length - 1; i++) { %>
                    <tr>
                        <td><%= keys[i] %></td> <% /* First column with original headers */ %>
                        <% for (let i = 0; i < keys.length - 1; i++) { %>
                            <tr>
                                <% var failValueExceedsTen = false; %>
                                <% for (let resultKey in suite.resultsSummary[firstKey]) { %>
                                    <% let value = Number(suite.resultsSummary[keys[i]][resultKey]); %>
                                    <% if (resultKey.includes('fail') && value > 10) { %>
                                        <% failValueExceedsTen = true; %>
                                        <% break; %>
                                    <% } %>
                                <% } %>

                                <% if (failValueExceedsTen) { %>
                                    <% status = 'Failed'; %>
                                    <% statusIcon = 'exclamation-circle failed-color'; %>
                                    <td><%= keys[i] %> <i class="fa fa-<%= statusIcon %> fa-lg" data-toggle="tooltip" data-placement="top" title="<%= status %>"><span><%= statusIcon %></span></i></td>
                                <% } else { %>
                                    <td><%= keys[i] %></td>
                                <% } %>

                                <% /* Rest of the columns */ %>
                                <% for (let resultKey in suite.resultsSummary[firstKey]) { %>
                                    <% let value = Number(suite.resultsSummary[keys[i]][resultKey]); %>
                                    <% if (resultKey.includes('fail') && value > 10) { %>
                                        <% status = 'Failed'; %>
                                        <% statusIcon = 'exclamation-circle failed-color'; %>
                                        <td><strong><%= value %> <i class="fa fa-<%= statusIcon %> fa-lg" data-toggle="tooltip" data-placement="top" title="<%= status %>"><span><%= statusIcon %></span></i></strong></td>
                                    <% } else { %>
                                        <td><%= value %></td>
                                    <% } %>
                                <% } %>

                            </tr>
                        <% } %>

                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</div>
<% } %>

